# see: https://github.com/anishathalye/dotbot#directives

- shell:
    - command: sh brew/setup.sh
      description: Install brew if it doesn't exist
    - command: brew bundle --file brew/Brewfile
      description: Install brew packages
    - command: sudo tlmgr update --self && sudo tlmgr install $(cat latex/packages.txt)
      description: Install latex packages
    # - command: sudo tlmgr option docfiles 1 && sudo tlmgr install --reinstall $(tlmgr list --only-installed | sed -e 's/^i //' -e 's/:.*$//')
    #   description: Build LaTeX documentation (this will take a while)
    - command: sudo cpan -i YAML::Tiny File::HomeDir Unicode::GCString
      description: Install perl packages (needed for latexindent)

- create:
    # location for local .cls/.sty files
    - ~/Library/texmf/tex/latex/

    # location for user settings
    - ~/Library/Application Support/Code/User/

- link:
    # brew
    ~/.Brewfile: brew/Brewfile

    # fish
    ~/.config/fish: fish

    # vscode
    ~/Library/Application Support/Code/User: .vscode

    # latex
    ~/Library/texmf/tex/latex/local: latex/local
    ~/.latexmkrc: latex/.latexmkrc

# remove broken symlinks
- clean:
    - "~"
    - ~/Library/Application Support/Code/User/
    - ~/Library/texmf/tex/latex/
