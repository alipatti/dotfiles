# see: https://github.com/anishathalye/dotbot#directives

- defaults:
    link:
      relink: true

- shell:
    - description: Install brew if it doesn't exist
      command: sh brew/setup.sh
    - description: Install brew packages
      command: brew bundle --file brew/Brewfile
    - description: Install perl packages needed for latexindent
      command: sudo cpan -i YAML::Tiny File::HomeDir Unicode::GCString
    - description: Install rust.
      command: rustup-init && rustup component add rustfmt

- create:
    - ~/Library/texmf/tex/latex/ # local TeX tree

    - ~/.config/nvim
    - ~/.config/fish
    - ~/.config/kitty

    - ~/Library/Application Support/Code/User/ # vscode

- link:
    ~/.Brewfile: brew/Brewfile
    ~/.config/fish: fish
    ~/.config/nvim: nvim
    ~/.config/gh: github
    ~/.hammerspoon: hammerspoon
    ~/.pandoc: pandoc
    ~/.rprofile: r/.rprofile
    ~/Library/Application Support/Code/User: .vscode
    ~/Library/texmf/tex/latex/local: latex
    ~/.latexmkrc: latex/.latexmkrc
    ~/.rustfmt.toml: rust/.rustfmt.toml
    ~/.prettierrc.yml: prettier/.prettierrc.yml

# remove broken symlinks
- clean:
    - "~"
    - ~/Library/Application Support/Code/User/
    - ~/Library/texmf/tex/latex/
    - ~/.config/*
