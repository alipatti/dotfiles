\NeedsTeXFormat{LaTeX2e}
\ProvidesClass{grfp}

% adhering to 2025 instructions from
% https://www.nsf.gov/funding/opportunities/grfp-nsf-graduate-research-fellowship-program/nsf25-547/solicitation

% pass `showframe` to debug margins
\DeclareOption{showframe}{\PassOptionsToPackage{showframe}{geometry}}
\ProcessOptions\relax

% load default article class
\LoadClass[11pt]{article}

\RequirePackage{geometry}

% ONLY THE INFORMATION REQUIRED IN THE GRFP APPLICATION MODULE WILL BE REVIEWED. NO ADDITIONAL ITEMS OR INFORMATION WILL BE ACCEPTED OR REVIEWED. APPLICANTS MUST NOT PROVIDE LINKS TO WEB PAGES WITHIN THE APPLICATION. CITED REFERENCES MUST INCLUDE THE TITLES OF THE JOURNAL OR PUBLICATION (ABBREVIATIONS ACCEPTED). IMAGES MAY BE INCLUDED AND DO NOT MODIFY THE PAGE LIMITS. REVIEW OF THE APPLICATION AND REFERENCE LETTERS IS BASED SOLELY ON MATERIALS RECEIVED BY THE APPLICATION AND REFERENCE LETTER DEADLINES. NO APPLICATION MATERIALS WILL BE ACCEPTED VIA EMAIL.
% 
% APPLICANTS MUST FOLLOW THE INSTRUCTIONS IN THE GRFP APPLICATION MODULE FOR COMPLETING EACH SECTION OF THE APPLICATION. THE STATEMENTS MUST BE WRITTEN USING THE FOLLOWING GUIDELINES:

% ----- STANDARD 8.5” X 11” PAGE SIZE;

\geometry{letterpaper}

% ----- ARIAL (NOT ARIAL NARROW), COURIER NEW, OR PALATINO LINOTYPE AT A FONT SIZE OF 10 POINTS OR LARGER;
% ----- TIMES NEW ROMAN AT A FONT SIZE OF 11 POINTS OR LARGER; OR
% ----- COMPUTER MODERN FAMILY OF FONTS AT A FONT SIZE OF 11 POINTS OR LARGER;
% ----- A FONT SIZE OF LESS THAN 10 POINTS MAY BE USED FOR MATHEMATICAL FORMULAS OR EQUATIONS, FIGURES, TABLES, OR DIAGRAM CAPTIONS AND WHEN USING A SYMBOL FONT TO INSERT GREEK LETTERS OR SPECIAL CHARACTERS. OTHER FONTS NOT SPECIFIED ABOVE, SUCH AS CAMBRIA MATH, MAY BE USED FOR MATHEMATICAL FORMULAS, EQUATIONS, OR WHEN INSERTING GREEK LETTERS OR SPECIAL CHARACTERS. DESCRIPTIVE ALTERNATIVE TEXT MUST BE PROVIDED FOR ALL IMAGES, GRAPHS, AND CHARTS, INCLUDING SUFFICIENT COLOR CONTRAST FOR TEXT AND GRAPHICS, AND MUST BE SUBMITTED IN A MACHINE READABLE/ACCESSIBLE ELECTRONIC FORMAT (E.G., HTML) TO ENSURE LEGIBILITY AND READABILITY FOR INDIVIDUALS WITH VISUAL IMPAIRMENTS;

% NOTE: computer modern is the default font in tex, so nothing to do

% ----- NO MORE THAN SIX LINES OF TEXT WITHIN A VERTICAL SPACE OF ONE INCH;
% ----- 1” MARGINS ON ALL SIDES, NO TEXT INSIDE 1” MARGINS (NO HEADER, FOOTER, NAME, OR PAGE NUMBER);
% ----- DO NOT USE LINE SPACING OPTIONS SUCH AS “EXACTLY 11 POINT” THAT ARE LESS THAN SINGLE SPACED;

\RequirePackage{parskip} % no indentation
\geometry{margin=1in} % 1 in margins
\pagenumbering{gobble} % no page numbers
\linespread{1.0} % single-spaced

\RequirePackage{enumitem}
\setlist{nosep}

% ----- PDF FORMAT ONLY;

% NOTE: default


% ----- DO NOT INCLUDE URLS OR WEBLINKS OR DIRECT THE REVIEWER TO EXTERNAL SITES;
% ----- CITED REFERENCES MUST INCLUDE THE NAME OF THE JOURNAL OR PUBLICATION (ABBREVIATIONS ACCEPTED). URLS AND DOI REFERENCES WILL NOT BE ACCEPTED IN PLACE OF THE NAME OF THE JOURNAL;

\RequirePackage[
  style=numeric,
  backend=biber,
  url=false,
  doi=false,
  isbn=false,
  eprint=false,
]{biblatex}

\renewcommand*{\subtitlepunct}{\addcolon\space} % add colon instead of period before subtitles
\AtEveryBibitem{\clearfield{subtitle}} % hide subtitles to make bib smaller
\AtEveryBibitem{\clearfield{url}} % omit URLs
\AtBeginBibliography{\small} % small font in bib

\RequirePackage{multicol} % for two-column bibliography

\RequirePackage{hyperref}
\hypersetup{colorlinks} % or hidelinks

\AtEndDocument{
  \section{References}

  \null \hfill \null \vspace{-\baselineskip} \vspace{3pt}

  \begin{multicols}{2}
    \printbibliography[heading=none]
  \end{multicols}
}


% ----- BOTH PERSONAL AND RESEARCH PLAN STATEMENTS MUST ADDRESS NSF’S REVIEW CRITERIA OF INTELLECTUAL MERIT AND BROADER IMPACTS (DESCRIBED IN DETAIL IN SECTION VI);
% ----- SEPARATE SECTIONS FOR "INTELLECTUAL MERIT" AND "BROADER IMPACTS," UNDER INDIVIDUAL HEADINGS AND SEPARATED BY A LINE BREAK MUST BE INCLUDED IN BOTH THE PERSONAL AND RESEARCH PLAN STATEMENTS. DO NOT INCLUDE OTHER TERMS IN THE INDIVIDUAL HEADINGS, COMBINE THESE TWO SECTIONS INTO ONE SECTION, OR COMBINE THEM WITH ANY OTHER SECTION;
% ----- PERSONAL AND RESEARCH PLAN STATEMENTS MUST HAVE LINE BREAKS BETWEEN SECTIONS. APPLICATIONS THAT DO NOT HAVE LINE BREAKS BETWEEN SECTIONS WILL BE RETURNED WITHOUT REVIEW; AND
% ----- APPLICATIONS THAT DO NOT CONFORM TO THE HEADING AND SECTION REQUIREMENTS FOR INTELLECTUAL MERIT AND BROADER IMPACTS WILL BE RETURNED WITHOUT REVIEW.

\RequirePackage[compact]{titlesec}
\titleformat{\section}[runin]{\bfseries}{\thesection}{1em}{}[.]
\titleformat{\subsection}[runin]{\itshape}{\thesubsection}{1em}{}[.]
\setcounter{secnumdepth}{0} % no numbers

