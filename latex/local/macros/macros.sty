% TODO refactor:
% - separate macros into files by category, e.g. macros-pseudocode, macros-crypto, macros-base, etc.
% - 

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{macros}

\RequirePackage{amssymb,amsmath,amsthm}
\RequirePackage{bbm} % \mathbb for numbers
\RequirePackage{mathtools} % := et al.

\RequirePackage{xspace}  % proper spacing after macros
\RequirePackage{xfrac}  % inline slanted fractions (\sfrac)

% ALGORITHM/CODE PACKAGES
\RequirePackage[
  noEnd,
  endLComment={},
]{algpseudocodex}

\newcommand{\algorithm}[1]{
  \medskip
  \begin{algorithmic}[1]
    #1
  \end{algorithmic}
}

\newcommand{\function}[3]{
  \Function {#1} {#2}
    #3
  \EndFunction
  \smallskip
}

% sets
\def\z{\mathbb Z}
\newcommand{\zz}[1]{\z / #1 \z}
\def\r{\mathbb R}
\def\q{\mathbb Q}
\def\c{\mathbb C}
\def\n{\mathbb N}
\def\t{\mathbb T}
\def\bit{\{0,1\}}

% complex numbers
\def\conj{\overline}
\newcommand{\norm}[1]{\left| #1 \right|}
\newcommand{\inner}[2]{\left\langle #1 \,|\, #2 \right\rangle}

% groups
\newcommand\gl[2]{\text{GL}_#1 #2}  % general linear group
% \newcommand\sl[2]{\text{SL}_#1 #2}  % special linear group
\newcommand\glnz{\gl n \z} % GL(n, Z)
\newcommand\slnz{\text{SL}_n \z}  % SL(n, Z)
\newcommand\mnnz{\text{M}_{n \times n} \z}  % M_{n x n}(Z)
\def\B{\mathcal{B}} % braid group
\def\S{\mathcal{S}} % symetric group

% group opperations
\let\iso\cong
\let\dual\widetilde
\newcommand\units{^ \times}
\let\normal\lhd
\DeclareMathOperator*{\cl}{c\ell}
\DeclareMathOperator{\stab}{Stab}
\DeclareMathOperator{\Hom}{Hom}

% crypto
\newcommand{\Enc}{\Call{Enc}{}}
\newcommand{\Dec}{\Call{Dec}{}}
\newcommand{\Sign}{\Call{Sign}{}}
\newcommand{\KeyGen}{\Call{KeyGen}{}}
\newcommand{\Eav}{\Call{Eav}{}}
\newcommand\concat{\ \| \ }
\newcommand\linkedwith{\: \vcenter{\hbox{\text{\footnotesize$\diamondsuit$}}}\: }
\renewcommand\L{\mathcal L}

% % acts-on hack
% \RequirePackage{mathabx}
% \def\actson{\mathrel{\reflectbox{$\righttoleftarrow$}}}

% fixing greek letters
\def\oldphi{\phi}
\def\oldepsilon{\epsilon}
\def\phi{\varphi}
\def\epsilon{\varepsilon}

% matrix operations
\DeclareMathOperator*{\adj}{adj}
\DeclareMathOperator*{\tr}{tr}

% function operations
\newcommand{\maps}[1]{\overset{#1}{\longmapsto}}
\newcommand\of{\circ}
\DeclareMathOperator{\img}{Im}

% quantum operations
\newcommand\tensor\otimes
\newcommand\tensorpower[1]{^{\tensor #1}}

% quantum gates
\def\cnot{\text{CNOT}}
\def\swap{\text{SWAP}}

% misc
\def\divides{\;|\;}
\newcommand{\inv}{^{-1}}

\DeclareMathOperator*{\sign}{sign}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator*{\pred}{predecessor}
\DeclareMathOperator*{\scsr}{successor}

\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\med}{median}

% for approximation algorithms
\def\opt{\texttt{OPT}\xspace}
\def\greedy{\texttt{GREEDY}\xspace}
\def\round{\texttt{ROUND}\xspace}

% probability
\DeclareMathOperator*{\prob}{Pr}
\newcommand\pr[1]{\prob[\,#1\,]}
\DeclareMathOperator*{\expec}{E}
\newcommand\ex[1]{\expec[\,#1\,]}
\newcommand\given{\ | \ }

% bracket pairs
\newcommand{\set}[1]{\left\{ #1 \right\}}
\newcommand{\tuple}[1]{\left\langle #1 \right\rangle}
\newcommand{\paren}[1]{\left( #1 \right)}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}


\newcommand\cross\times
