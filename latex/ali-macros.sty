\ProvidesPackage{ali-macros}

\RequirePackage{amsmath, amssymb}
\RequirePackage{mathtools} % does a bunch of stuff
\RequirePackage{xfrac}  % inline slanted fractions with \sfrac
\RequirePackage{eucal} % nicer-looking \mathcal
\RequirePackage{mathrsfs}  % add mathscr (script)

% fix greek letters because i'm not a psychopath
\let\oldphi\phi
\let\phi\varphi
\let\varphi\oldphi

\let\oldepsilon\epsilon
\let\epsilon\varepsilon
\let\varepsilon\oldepsilon

% change \left and \right to not add extra space before/after
\RequirePackage{mleftright}
\mleftright

% bracket pairs
\newcommand{\set}[1]{\left\{ #1 \right\}}
\newcommand{\tuple}[1]{\left\langle #1 \right\rangle}
\newcommand{\paren}[1]{\left(#1 \right)}
\newcommand{\brac}[1]{\left[ #1 \right]}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\norm}[1]{\left\| #1 \right\|}
\newcommand{\inner}[2]{\left\langle #1 , #2 \right\rangle}

% left maps to arrow: <-|
\newcommand{\mapsfrom}{\mathbin{\scalebox{-1}[1]{\mapsto}}}

% common sets
\newcommand{\Z}{\mathbb Z}  % integers
\newcommand{\R}{\mathbb R}  % reals
\newcommand{\Q}{\mathbb Q}  % rationals
\newcommand{\C}{\mathbb C}  % complexes
\newcommand{\N}{\mathbb N}  % naturals
\newcommand{\T}{\mathbb T}  % circle group
\newcommand{\A}{\mathbb A}  % algebraic integers
\newcommand{\F}{\mathbb F}  % finite field
% \newcommand{\S}{\mathcal{S}} % symetric group
\newcommand{\bit}{\set{0,1}}  % bits

% function groups, etc.
\DeclareMathOperator{\Hom}{Hom} % homomorphisms
\DeclareMathOperator{\Aut}{Aut} % automorphisms
\DeclareMathOperator{\Gal}{Gal} % Galois group
\DeclareMathOperator{\Fix}{Fix} % Fixed field
\DeclareMathOperator{\End}{End} % endomorphism
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Frac}{Frac} % fraction field
\DeclareMathOperator{\Stab}{Stab} % stabilizer

% groups
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\M}{M}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\U}{U}

% misc operations
\DeclareMathOperator*{\argmin}{arg\,min}  % argmin
\DeclareMathOperator*{\argmax}{arg\,max}  % argmax
\DeclareMathOperator*{\med}{median}  % median
\DeclareMathOperator*{\sign}{sign}  % sign
\DeclareMathOperator*{\lcm}{lcm}  % lcm
\DeclareMathOperator*{\supp}{supp}  % support
\DeclareMathOperator*{\Li}{Li}
\newcommand{\given}{\mid}
\newcommand{\divides}{\mid}
\newcommand{\concat}{\mid}
\newcommand{\tensor}{\otimes}  % tensor product
\newcommand{\tensorpower}[1]{^{\tensor #1}}  % tensor power
\newcommand{\conj}{\overline}  % complex conjugate
\newcommand{\cross}{\times}  % cross product
\newcommand{\of}{\circ}  % function composition
\newcommand{\quotient}[1]{\, \big/ \, #1} % quotient groups
\newcommand{\iso}{\cong} % isomorphic
\newcommand{\normal}{\lhd} % normal subgroup

\newcommand{\dual}{\widetilde}

% frequent text
\newcommand{\id}{{\mathrm{id}}} % identity
\newcommand{\squarefree}{\ \text{$\square$-free}}
\newcommand{\otherwise}{\text{otherwise}}
\renewcommand{\and}{\text{and}}

% common exponents
\newcommand{\inv}{^{-1}}  % inversion
\newcommand{\trans}{^{\mathnormal T}} % transpose
\renewcommand{\perp}{^\bot} % perp
\renewcommand{\star}{^*} % star
\newcommand{\units}{^\times}

% image, rank, span, trace, etc.
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\spn}{span}  % \span is a built-in latex command
\DeclareMathOperator{\tr}{tr}
\DeclareMathOperator{\adj}{adj}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\chr}{char} % \char is built in

% different equals signs
\RequirePackage{mathtools}
\newcommand{\ceq}{\coloneqq} % definition
\newcommand{\qeq}{\overset ? =} % maybe equal

% fixing \Re, \Im
\DeclareMathOperator{\Real}{Re}
\DeclareMathOperator{\Imag}{Im}

% stats/probability stuff
\renewcommand{\P}[2][{}]{\operatorname{P}_{#1}\paren{#2}}
\newcommand{\E}[2][{}]{\operatorname{E}_{#1}\paren{#2}}
\newcommand{\Cov}[3][{}]{\operatorname{Cov}_{#1}\paren{#2, \, #3}}
\DeclareMathOperator*{\Var}{Var}
\DeclareMathOperator*{\Bias}{Bias}
\DeclareMathOperator*{\MSE}{MSE}
\DeclareMathOperator{\Norm}{Norm}
\DeclareMathOperator{\Gam}{Gamma}
\DeclareMathOperator{\Binom}{Binom}
\DeclareMathOperator{\logit}{logit}

% crypto stuff
\newcommand{\Enc}{\Call{Enc}{}}
\newcommand{\Dec}{\Call{Dec}{}}
\newcommand{\Sign}{\Call{Sign}{}}
\newcommand{\KeyGen}{\Call{KeyGen}{}}
\newcommand{\Eav}{\Call{Eav}{}}
\newcommand{\linkedwith}{\: \vcenter{\hbox{\text{\footnotesize$\diamondsuit$}}}\: }
\renewcommand{\L}{\mathcal L}

